# Default values for mariadb.
# This is a YAML-formatted file.
# Declare variables to be passed into your templates.

architecture: standalone

image:
  registry: docker.io
  repository: mariadb
  tag: "10.6"
  pullPolicy: IfNotPresent

auth:
  # To use existing secret, define existing secret value
  existingSecret:
  secretKeys:
    rootPasswordKey: password
#  database: demo
#  username: demo
#  password: demo
#  replicationPassword: repl

myCnf: |-
  [mariadb]
  bind-address=0.0.0.0
  default_storage_engine=InnoDB
  binlog_format=row
  innodb_autoinc_lock_mode=2
  max_allowed_packet=256M

resources:
  limits:
    cpu: 500m
    memory: 1Gi
  requests:
    cpu: 200m
    memory: 256Mi

persistence:
  size: 10Gi

service:
  type: ClusterIP
  annotations: {}

primary:
  containerPorts:
    mysql: 3306
  automaticFailover: true
  service:
    type: ClusterIP
    annotations: {}


secondary:
  enabled: false
  replicaCount: 2
  service:
    type: ClusterIP
    annotations: {}
  # Semi-synchronous replication
  semiSync:
    enabled: true

# The bitnami chart uses a separate chart for backups.
# The backup section is kept here for reference but is not used by the bitnami chart directly.
backup:
  enabled: false
  # Backup schedule (cron format)
  schedule: "0 0 * * *"
  # Storage for backups
  storage:
    # Storage size
    size: 10Gi
    # Access modes
    accessModes:
      - ReadWriteOnce
  # Retention policy
  retention:
    # Number of backups to keep
    keep: 3

# The bitnami chart uses a separate chart for backups.
# The restore section is kept here for reference but is not used by the bitnami chart directly.
restore:
  enabled: false
  # The name of the backup to restore from
  backupName: ""

metrics:
  enabled: false
  # Exporter image
  exporter:
    image:
      repository: prom/mysqld-exporter
      tag: v0.15.1
      pullPolicy: IfNotPresent
  # ServiceMonitor settings
  serviceMonitor:
    # If true, a ServiceMonitor resource will be created
    enabled: false
    # Scrape interval
    interval: 30s
    # Scrape timeout
    scrapeTimeout: 10s
